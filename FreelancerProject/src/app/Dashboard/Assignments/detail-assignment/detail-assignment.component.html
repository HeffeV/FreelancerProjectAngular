<div class="container" *ngIf="show">
  <div class="row">

    <div class="col-lg-8 col-md-8 col-sm-12">
      <h1 class="text-primary">{{assignment.assignmentName}}
        <div *ngIf="isAuthorized">
          <button type="button" class="btn btn-primary btn-pill m-2"
            (click)="editAssignment(assignment.assignmentID)">Edit</button>
          <button type="button" class="btn btn-danger btn-pill m-2"
            (click)="deleteAssignment(assignment.assignmentID)">Delete</button>
        </div>
      </h1>
      <h3 class="text-secondary">{{assignment.description}}</h3>
      <h5><i class="material-icons">my_location</i> {{assignment.location.address}}, {{assignment.location.postcode}},
        {{assignment.location.country}}</h5>
      <h5><i class="material-icons">assignment</i> Status : {{assignment.status.currentStatus}}</h5>

      <div *ngIf="alreadyApplied == false">
        <button type="button" *ngIf="!success" class="btn btn-primary btn-pill m-2" (click)="apply(assignment)">Apply
          for this assignment</button>
        <div class="alert alert-success" role="alert" *ngIf="success">
          Successfully applied!
          <button type="button" class="btn btn-light" (click)="cancelAssignment(assignment)">Cancel</button>
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="error">
          Error applying!
        </div>
      </div>
      <div *ngIf="alreadyApplied == true">
        <div class="alert alert-success" role="alert">
          Successfully applied!
          <button type="button" class="btn btn-light" (click)="cancelAssignment(assignment)">Cancel</button>
        </div>
      </div>

      <h5><i class="material-icons">location_city</i> Company</h5>
      <div class="col-12">
        <div class="card">
          <img class="card-img-top"
            src="https://images.unsplash.com/photo-1484417894907-623942c8ee29?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1189&q=80"
            alt="Assignment image">
          <div class="card-body">
            <h4 class="card-title">{{assignment.company.companyName}}</h4>
            <p class="card-text">{{assignment.company.about}}</p>
            <button class="btn btn-primary" (click)="btnSelectCompany(assignment.company.companyID)">Tell me more
              &rarr;</button>
          </div>
        </div>
      </div>
      <div *ngIf="isAuthorized">
        <div class="accordion" id="accordionUserAssignments">
          <div class="card">
            <div class="card-header" id="headingOne">
              <h2 class="mb-0">
                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
                  aria-expanded="true" aria-controls="collapseOne">
                  Candidates
                </button>
              </h2>
            </div>

            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
              data-parent="#accordionUserAssignments">
              <div class="card-body">
                <div *ngFor="let ua of assignment.userAssignments">
                  <p>{{ua.user.username}} ({{ua.user.name}} {{ua.user.lastName}})</p>
                  <button class="btn btn-light" (click)="acceptCandidate(assignment, ua.user.userID)">Accept this
                    candidate</button>
                  <button class="btn btn-light" (click)="declineCandidate(assignment, ua.user.userID)">Decline this
                    candidate</button>
                  <button class="btn btn-light" (click)="viewCandidate(ua.user.userID)">View info</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4 col-md-4 col-sm-12 mt-2">

      <img *ngIf="assignment.image==''" src="../../../assets/sea.jfif" class="img-fluid" alt="img">
      <img *ngIf="assignment.image!=''" src="{{assignment.image}}" class="img-fluid" alt="img">

      <h4 class="text-muted mt-3 mb-2">
        <hr>
      </h4>
      <span class="badge badge-primary mr-2 mb-2" *ngFor="let ta of assignment.tagAssignments">{{ta.tag.tagName}}</span>
    </div>

  </div>
</div>